# nfpm packaging config for GlanceHUD (Linux)
# https://nfpm.goreleaser.com

name: "GlanceHUD"
arch: ${GOARCH}
platform: "linux"
version: "0.6.1"
section: "default"
priority: "extra"
maintainer: ${GIT_COMMITTER_NAME} <${GIT_COMMITTER_EMAIL}>
description: "A cross-platform floating system monitor dashboard"
vendor: "harry18456"
homepage: "https://github.com/harry18456/GlanceHUD"
license: "MIT"
release: "1"

contents:
  - src: "./bin/GlanceHUD"
    dst: "/usr/local/bin/GlanceHUD"
  - src: "./build/appicon.png"
    dst: "/usr/share/icons/hicolor/128x128/apps/GlanceHUD.png"
  - src: "./build/linux/GlanceHUD.desktop"
    dst: "/usr/share/applications/GlanceHUD.desktop"

# Default dependencies for Debian 12/Ubuntu 22.04+ with WebKit 4.1
depends:
  - libgtk-3-0
  - libwebkit2gtk-4.1-0

# Distribution-specific overrides for different package formats and WebKit versions
overrides:
  # RPM packages for RHEL/CentOS/AlmaLinux/Rocky Linux (WebKit 4.0)
  rpm:
    depends:
      - gtk3
      - webkit2gtk4.1

  # Arch Linux packages (WebKit 4.1)
  archlinux:
    depends:
      - gtk3
      - webkit2gtk-4.1

scripts:
  postinstall: "./build/linux/nfpm/scripts/postinstall.sh"
