@import "tailwindcss";

/* Hide scrollbar but keep scroll functionality */
.no-scrollbar {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE/Edge */
}
.no-scrollbar::-webkit-scrollbar {
  display: none; /* Chrome/Safari/Opera */
}

/* ── Design Tokens ── */
:root {
  /* Status Colors */
  --color-healthy: #22c55e;
  --color-warning: #f59e0b;
  --color-critical: #ef4444;
  --color-info: #38bdf8;

  /* Glass Layers — opacity is driven by JS via --hud-opacity */
  --hud-opacity: 0.72;
  --glass-bg: rgba(12, 12, 16, var(--hud-opacity));
  --glass-border: rgba(255, 255, 255, 0.06);
  --glass-divider: rgba(255, 255, 255, 0.06);

  /* Text Hierarchy */
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.55);
  --text-tertiary: rgba(255, 255, 255, 0.3);
}

@theme {
  --font-mono: "JetBrains Mono", ui-monospace, monospace;
  --font-sans: "Inter", system-ui, sans-serif;
}

/* ── Global ── */
*,
*::before,
*::after {
  border-color: transparent;
}

html,
body {
  margin: 0;
  padding: 0;
  background: transparent;
  font-family: var(--font-sans);
  overflow: hidden;
  user-select: none;
  border: none;
  outline: none;
}

#root {
  background: transparent;
  /* Width fills viewport; height is determined by content so that
     useAutoResize can measure scrollHeight accurately and shrink
     the window to fit. Do NOT use height:100vh — it would lock
     scrollHeight to the viewport height and prevent resizing. */
  width: 100vw;
}

/* ── Drag Region ── */
.drag-region {
  --wails-draggable: drag;
}
.no-drag {
  --wails-draggable: no-drag;
}

/* ── Glass Container ── */
.hud-glass {
  /* var(--glass-bg) = rgba(12, 12, 16, <opacity>).
     On Win32 WS_EX_LAYERED transparent windows, each pixel's composited
     alpha determines hit-testing: alpha>0 → hittable, alpha=0 → click-through.
     As long as --hud-opacity > 0 the glass area will receive mouse events.
     IMPORTANT: CSS multi-background syntax only allows <color> in the LAST
     layer — do NOT add a second bare color here or the rule becomes invalid
     and the browser drops the entire declaration (→ transparent → click-through). */
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
}

/* ── Divider ── */
.hud-divider {
  height: 1px;
  background: var(--glass-divider);
  margin: 0 16px;
}

/* ── Ring Progress ── */
.ring-track {
  stroke: rgba(255, 255, 255, 0.06);
}

/* ── Grid Layout ── */
.hud-grid .react-grid-item {
  transition: all 0.2s ease;
  /* Allow overflow so our internal cells can handle clipping/borders
     RGL sets overflow: hidden by default usually, but we override it here
     to ensure our borders are visible if they go outside?
     No, we want containment.
  */
  overflow: visible;
}

/*
   Placeholder styling:
   The placeholder is an RGL item with 190x120 size.
*/
.hud-grid .react-grid-item.react-grid-placeholder {
  background: rgba(56, 189, 248, 0.12) !important;
  border: 1px dashed rgba(56, 189, 248, 0.4) !important;
  border-radius: 10px;
  opacity: 1;
  z-index: 5;
}

/* Remove expanded ::after */
.hud-grid .react-grid-item.react-grid-placeholder::after {
  content: none;
}

/* ── Edit Mode ── */
.hud-grid-edit {
  position: relative;
  overflow: hidden; /* Clip grid overlay beyond visible content width */
  --wails-draggable: no-drag;
}

/* All interactive children inside the grid must also block Wails drag */
.hud-grid-edit * {
  --wails-draggable: no-drag;
}

/* Grid overlay driven by CSS custom properties from HudGrid:
   --grid-col-w: actual column width (px, incl. gap)
   --grid-row-h: actual row height (px, incl. gap)              */
.hud-grid-edit::before {
  content: "";
  position: absolute;
  inset: 0;
  /* Revert to subtle white grid lines */
  background-image:
    linear-gradient(rgba(255, 255, 255, 0.04) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255, 255, 255, 0.04) 1px, transparent 1px);
  background-size: var(--grid-col-w, 198px) var(--grid-row-h, 48px);
  /*
     Center alignment:
     Gap center is at -4px (relative to Item start 0).
     We want the grid line to pass through the Gap center.
     offset: -4px -4px
  */
  background-position: -4px -4px;
  pointer-events: none;
  z-index: 0;
  border-radius: 10px;
}

/* RGL Item Base - The Source of Truth for Size (190x120) */
.hud-widget-cell {
  position: relative;
  overflow: hidden; /* Ensure content is clipped */
  height: 100%;
}

/* Normal Mode Style */
.hud-cell-view {
  border: 1px solid rgba(255, 255, 255, 0.15); /* VISIBLE BORDER */
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.02);
  transition: all 0.2s ease;
}

/* Edit Mode Style */
.hud-cell-edit {
  border: 1px dashed rgba(255, 255, 255, 0.3); /* Clear dashed border */
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.02);
  transition: all 0.2s ease;
  cursor: grab; /* Whole cell is draggable */
}

.hud-cell-edit:active {
  cursor: grabbing;
}

/* react-grid-layout resize handles — all 8 directions */
.hud-grid .react-grid-item > .react-resizable-handle {
  background: none;
  position: absolute;
  z-index: 30;
}

/* Corner handles — 16x16 hit area */
.hud-grid .react-grid-item > .react-resizable-handle-se {
  right: 0 !important;
  bottom: 0 !important;
  width: 16px;
  height: 16px;
  cursor: se-resize;
}
.hud-grid .react-grid-item > .react-resizable-handle-sw {
  left: 0 !important;
  bottom: 0 !important;
  width: 16px;
  height: 16px;
  cursor: sw-resize;
}
.hud-grid .react-grid-item > .react-resizable-handle-ne {
  right: 0 !important;
  top: 0 !important;
  width: 16px;
  height: 16px;
  cursor: ne-resize;
}
.hud-grid .react-grid-item > .react-resizable-handle-nw {
  left: 0 !important;
  top: 0 !important;
  width: 16px;
  height: 16px;
  cursor: nw-resize;
}

/* Edge handles — thin strips along edges */
.hud-grid .react-grid-item > .react-resizable-handle-n {
  top: 0 !important;
  left: 16px !important;
  right: 16px !important;
  width: auto;
  height: 8px;
  cursor: n-resize;
}
.hud-grid .react-grid-item > .react-resizable-handle-s {
  bottom: 0 !important;
  left: 16px !important;
  right: 16px !important;
  width: auto;
  height: 8px;
  cursor: s-resize;
}
.hud-grid .react-grid-item > .react-resizable-handle-e {
  right: 0 !important;
  top: 16px !important;
  bottom: 16px !important;
  width: 8px;
  height: auto;
  cursor: e-resize;
}
.hud-grid .react-grid-item > .react-resizable-handle-w {
  left: 0 !important;
  top: 16px !important;
  bottom: 16px !important;
  width: 8px;
  height: auto;
  cursor: w-resize;
}

/* Hide all default visual indicators — clean invisible handles */
.hud-grid .react-grid-item > .react-resizable-handle::after {
  content: none;
}

/* ── Locked Mode ── */
.hud-locked {
  border-color: rgba(245, 158, 11, 0.15);
}
